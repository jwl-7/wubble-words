(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function e(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(t){if(t.ep)return;t.ep=!0;const a=e(t);fetch(t.href,a)}})();class u extends HTMLElement{constructor(){super();const n=document.createElement("div");n.className="pacman-loader";for(let e=0;e<5;e++)n.appendChild(document.createElement("div"));this.appendChild(n)}}customElements.define("pacman-loader",u);class p extends HTMLElement{audioCtx;canvas;ctx;message;wordsPool=["Boom","Zap","Wobble","Fizz","Bop","Bang","Glitch","Spark","Pop","Zing","Wham","Funk","Twist","Zoom","Crack","Bam","Clash","Splat","BangBang","Zwoop","Kaboom","Whizz","Thunk","Fwoosh","Smash","BoomZap","Twack","Womp","Blam","Shhh","Blorp","Blitz","Flick","Snapp","Whack","Kablam","ZingZap","ThunkBang","BopBop"];lastKeyTime=0;waveEnergy=0;constructor(){super(),this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.canvas=document.createElement("canvas"),this.canvas.className="wubble-bg",this.ctx=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),window.addEventListener("resize",()=>this.resizeCanvas()),this.resizeCanvas(),requestAnimationFrame(()=>this.drawWave()),this.message=document.createElement("div"),this.message.className="wubble-message",this.message.textContent=this.shuffleText("PRESS KEYS"),document.body.appendChild(this.message);const n=()=>{this.audioCtx.state==="suspended"&&this.audioCtx.resume()};document.addEventListener("touchstart",n,{once:!0}),document.addEventListener("pointerdown",n,{once:!0}),document.addEventListener("keydown",e=>this.handleKey(e)),document.addEventListener("pointerdown",e=>this.handleKey(e)),document.addEventListener("touchstart",e=>this.handleKey(e)),setInterval(()=>this.checkInactivity(),200)}shuffleText(n){return n.split("").sort(()=>Math.random()-.5).join("")}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}drawWave(n=0){const e=this.ctx,{width:o,height:t}=this.canvas;e.clearRect(0,0,o,t);const a=t*(.15+this.waveEnergy*.25),i=.002+this.waveEnergy*.004,d=6;e.beginPath();for(let s=0;s<o;s++){const c=t/2+Math.sin(s*i+n*.002)*a,l=s/o*360+n*.25;e.strokeStyle=`hsl(${l}, 100%, 60%)`,e.lineWidth=d,s===0?e.moveTo(s,c):e.lineTo(s,c)}e.stroke(),this.waveEnergy=Math.max(0,this.waveEnergy-.01),requestAnimationFrame(s=>this.drawWave(s))}handleKey(n){this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this.lastKeyTime=Date.now(),this.waveEnergy=Math.min(1,this.waveEnergy+.4),this.message.style.opacity="0";let e=this.wordsPool[Math.floor(Math.random()*this.wordsPool.length)];e=this.shuffleText(e);const o=document.createElement("div");o.className="word",o.textContent=e;const t=Math.floor(Math.random()*360);o.style.color=`hsl(${t}, 100%, 60%)`,o.style.textShadow=`0 0 10px hsl(${t}, 100%, 70%), 0 0 30px hsl(${t}, 100%, 50%)`,document.body.appendChild(o);let a=window.innerWidth/2+(Math.random()*200-100),i=window.innerHeight/2+(Math.random()*200-100),d=(Math.random()-.5)*8,s=-6+(Math.random()-.5)*4,c=1;const l=()=>{s+=.18,a+=d,i+=s,c=Math.max(0,c-.012);const m=.8+c*.5;o.style.transform=`translate(${a}px, ${i}px) scale(${m})`,o.style.opacity=`${c}`,c>0?requestAnimationFrame(l):o.remove()};requestAnimationFrame(l),this.playWobble()}checkInactivity(){Date.now()-this.lastKeyTime>2500&&(this.message.style.opacity="1",this.message.textContent=this.shuffleText("PRESS KEYS"))}playWobble(){try{const n=this.audioCtx.currentTime,e=this.audioCtx.createOscillator(),o=["sine","triangle"];e.type=o[Math.floor(Math.random()*o.length)],e.frequency.value=35+Math.random()*45;const t=this.audioCtx.createGain();t.gain.setValueAtTime(0,n),t.gain.linearRampToValueAtTime(.25+Math.random()*.1,n+.05),t.gain.linearRampToValueAtTime(0,n+.5+Math.random()*.3);const a=this.audioCtx.createBiquadFilter();a.type="lowpass",a.frequency.value=200+Math.random()*200;const i=this.audioCtx.createOscillator(),d=this.audioCtx.createGain();i.type="sine",i.frequency.value=1+Math.random()*3,d.gain.value=10+Math.random()*20,i.connect(d),d.connect(e.frequency);const s=this.audioCtx.createStereoPanner();s.pan.value=Math.random()*.6-.3,e.connect(a),a.connect(t),t.connect(s),s.connect(this.audioCtx.destination),e.start(n),e.stop(n+.5+Math.random()*.4),i.start(n),i.stop(n+.5+Math.random()*.4)}catch{}}}customElements.define("wubble-app",p);function h(){const r=document.getElementById("root");if(!r)throw new Error("Root element not found");const n=document.createElement("pacman-loader");r.appendChild(n),requestAnimationFrame(()=>{setTimeout(()=>{r.contains(n)&&r.removeChild(n);const e=document.createElement("wubble-app");r.appendChild(e)},2e3)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",h):h();
